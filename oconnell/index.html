<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CPL Digital Sign: Main</title>
    <link href="https://fonts.googleapis.com/css?family=Raleway:300,400,400i,500,600,600i,700,700i" type="text/css" rel="stylesheet"/> 
    <link rel="stylesheet" href="//lgapi-us.libapps.com/web/css1.21.5/springshare.common.min.css" />
    <link href="../style.css" type="text/css" rel="stylesheet"/>
    <link href="../weather-icons/css/weather-icons.min.css" type="text/css" rel="stylesheet"/>
  </head>

  <body>

    <div id="cpl-header-div">
      <div id="cpl-logo-div">
	<img id="cpl-logo-img" src="../images/logo.png" />
      </div>
      <div id="cpl-weather-image"></div>
      <div id="cpl-dtw-div">
	<div id="cpl-tw"><span id="cpl-weather"></span><span id="cpl-time"></span></div>
	<div id="cpl-date"></div>
      </div>
    </div>
      
    <div id="cpl-events-div">
      <div id="cpl-events-header">Virtual &amp O'Connell Library Events</div>
      <div id="cpl-events-column-0" class="cpl-events-column"></div>
      <div id="cpl-events-divider"><img id="cpl-line" src="../images/line.png"/></div>
      <div id="cpl-events-column-1" class="cpl-events-column"></div>
      <div id="api_upc_cid7052_7090_iid3963"></div>
<div id="api_upc_cid_iid3963"></div><script src="https://cambridgepl.libcal.com/api_events.php?m=upc&cid=&audience=&c=3788&d=&l=5&simple=ul_date&context=object&format=js"> </script>    </div>
    
    <div id="cpl-poster-div">

      <!-- poster widget, minus some css -->
      <script type="text/javascript" src="//code.jquery.com/jquery-1.12.4.min.js"></script>
      <script type="text/javascript" src="//code.jquery.com/ui/1.9.2/jquery-ui.min.js"></script>
      <script type="text/javascript" src="//lgapi-us.libapps.com/web/bootstrap/3.3.4/js/bootstrap.min.js"></script>
      <script type="text/javascript" src="//lgapi-us.libapps.com/web/js1.21.5/springshare.public.min.js"></script>
      <script type="text/javascript" src="//lgapi-us.libapps.com/web/js1.21.5/springshare.common.min.js"></script>
      <script type="text/javascript" src="//lgapi-us.libapps.com/web/js1.21.5/common/springspace_sui_helptip.js"></script>
      <!-- removed css was here... -->
      <link href="//lgapi-us.libapps.com/web/css1.21.5/common/springspace_sui_helptip.css" rel="stylesheet"><script src="//lgapi-us.libapps.com/sa.php?site_id=11992" onload="jQuery(window).on("load", function() {springSpace.springTrack.init({_st_site_id: '11992'});});"></script>
      <script>springSpace.Common = springSpace.Common || { };
	springSpace.Common.constant = { PROCESSING: { ACTION_DISPLAY_POLL: 159}};
	springSpace.Common.baseURL = "//lgapi-us.libapps.com/";
	springSpace.Common.apiLoad = true;</script><script>
	springshare_widget_config_1515238545360 = { path: 'boxes/17351497' };
      </script>
      <div id="s-lg-widget-1515238545360"></div>


<!-- widget cleanup -->
<style>
button.slick-prev.slick-arrow::before {display:none;}
button.slick-next.slick-arrow::before {display: none;}
#s-lib-cpane-20417542 { margin: 0px; }
#s-lg-box-17351502 {
    background-color: rgba(21, 116, 147, 1);
}
</style>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery.simpleWeather/3.1.0/jquery.simpleWeather.min.js"></script>
<script type="text/javascript" src="../script.js"> </script>      

    </div>


    <!-- Added code: Hive open message logic and styling (only addition requested) -->
    <style>
      #hive-open-message {
        font-family: Raleway, Arial, sans-serif;
        font-weight: 600;
        font-size: 60px;
        color: #ffffff;
        background: rgba(21, 116, 147, 1);
        border-radius: 15px;
        display: none;
        text-align: center;
      }
    </style>

    <div id="hive-open-message">The Hive Makerspace is OPEN! Come join us downstairs on L1</div>

    <script>
      (function() {
        function isHiveOpen(date) {
          var day = date.getDay(); // 0 Sun,1 Mon,...6 Sat
          var hour = date.getHours();
          var minute = date.getMinutes();

          // convert to minutes since midnight for precise bounds if needed
          var nowMins = hour * 60 + minute;

          // schedule in minutes [start, end) where times are local
          var schedule = {
            1: { start: 13 * 60, end: 17 * 60 }, // Mon 1PM-5PM
            2: { start: 13 * 60, end: 21 * 60 }, // Tue 1PM-9PM
            3: { start: 13 * 60, end: 21 * 60 }, // Wed 1PM-9PM
            4: { start: 9 * 60,  end: 21 * 60 }, // Thu 9AM-9PM
            5: { start: 9 * 60,  end: 17 * 60 }, // Fri 9AM-5PM
            6: { start: 9 * 60,  end: 17 * 60 }  // Sat 9AM-5PM
          };

          var hours = schedule[day];
          if (!hours) return false;
          return nowMins >= hours.start && nowMins < hours.end;
        }

        function updateHiveMessage() {
          var msgEl = document.getElementById('hive-open-message');
          if (!msgEl) return;
          var now = new Date();
          if (isHiveOpen(now)) {
            msgEl.style.display = 'block';
            // insert the message below the upcoming events container if not already positioned there
            var eventsDiv = document.getElementById('cpl-events-div');
            if (eventsDiv && msgEl.parentNode !== eventsDiv.parentNode) {
              // place message immediately after the events div
              eventsDiv.parentNode.insertBefore(msgEl, eventsDiv.nextSibling);
            }
          } else {
            msgEl.style.display = 'none';
          }
        }

        // initial check
        updateHiveMessage();

        // update every minute to catch open/close changes
        setInterval(updateHiveMessage, 60 * 1000);
      })();
    </script>

  </body>
</html>
